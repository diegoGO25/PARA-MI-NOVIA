body {
  margin: 0;
  font-family: 'Press Start 2P', cursive;
  overflow: hidden;
}

/* ===== PANTALLAS ===== */
.screen {
  position: fixed;
  inset: 0;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  opacity: 1;
  transition: opacity 1.5s ease;
}

.screen.fade-out {
  opacity: 0;
  pointer-events: none;
}

.scene {
  position: fixed;
  inset: 0;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.6s ease;
  background: black; /
}


.scene.active {
  opacity: 1;
  pointer-events: auto;
}


/* ===== FONDO TITULO ===== */
.title-background {
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, #3b2c5a, #4a3f73, #5a4d8a);
  z-index: 0;
}

/* ===== CORAZONES ===== */
#heartCanvas {
  position: absolute;
  inset: 0;
  z-index: 1;
  pointer-events: none;
  filter: blur(1.5px);
}

/* ===== TEXTO ===== */
.title {
  position: relative;
  z-index: 2;
  font-size: 38px;
  color: #ff7eb9;
  text-shadow: 3px 3px #ffb3d9, -2px -2px #e94c8a;
  animation: titleBounce 2.5s ease-in-out infinite;
}

.subtitle {
  position: relative;
  z-index: 2;
  font-size: 11px;
  color: white;
}

@keyframes titleBounce {
  0% { transform: translateY(0); }
  40% { transform: translateY(-8px); }
  70% { transform: translateY(2px); }
  100% { transform: translateY(0); }
}

/* ===== CIELO ===== */
#skyCanvas {
  position: absolute;
  inset: 0;
  z-index: 0;
}

/* ===== PERSONAJES ===== */
.character {
  position: absolute;
  bottom: 80px;
  width: 120px;
  height: 240px;
  display: flex;
  flex-direction: column;
  align-items: center;
  z-index: 2;
  --skin: #ffd1dc;
  transition: transform 4s ease-out;
}

.character.lean {
  transition: transform 0.4s ease;
}



/* ===== PERSONAJES ===== */
.girl {
  left: 0;
  transform: translateX(-100vw);
}

.boy {
  right: 0;
  transform: translateX(100vw);
}

.walk-girl {
  transform: translateX(42vw);
}

.walk-boy {
  transform: translateX(-42vw);
}

.girl.lean {
  transform: translateX(42vw) rotate(-4deg);
}

.boy.lean {
  transform: translateX(-42vw) rotate(4deg);
}





/* ===== CABEZA ===== */
.head {
  width: 80px;
  height: 80px;
  background: var(--skin);
  border-radius: 50%;
  position: relative;
}

.eyes::before,
.eyes::after {
  content: "";
  position: absolute;
  top: 30px;
  width: 8px;
  height: 8px;
  background: black;
  border-radius: 50%;
}
.eyes::before { left: 20px; }
.eyes::after { right: 20px; }

.smile {
  position: absolute;
  bottom: 18px;
  left: 50%;
  width: 20px;
  height: 10px;
  border-bottom: 3px solid black;
  border-radius: 0 0 20px 20px;
  transform: translateX(-50%);
}

/* ===== PELO ===== */
.girl .hair {
  position: absolute;
  top: -10px;
  width: 80px;
  height: 35px;
  background: #000;
  border-radius: 50% 50% 0 0;
}

.boy .hair {
  position: absolute;
  top: -12px;
  width: 80px;
  height: 35px;
  background: #000;
  border-radius: 40% 60% 50% 50%;
}


/* ===== BARBA ===== */
.beard {
  position: absolute;
  bottom: -9px;
  left: 50%;
  width: 15px;
  height: 15px;
  background: #000;
  transform: translateX(-50%);
  border-radius: 0 0 40px 40px;
}


/* ===== CUERPO ===== */
.body {
  width: 60px;
  height: 100px;
  background: #ff7eb9;
  margin-top: 10px;
  border-radius: 20px;
}
.boy .body { background: #d62828; }

/* ===== BRAZOS ===== */
.arm {
  position: absolute;
  top: 110px;
  width: 18px;
  height: 70px;
  background: var(--skin);
  border-radius: 20px;
  transform-origin: top center;
  transition: transform 0.6s ease;
}
/* ===== POSICI√ìN NORMAL (estado base) ===== */

.girl .arm-left {
  left: 10px;
  transform: rotate(20deg);
}

.girl .arm-right {
  right: 10px;
  transform: rotate(-30deg);
}

.boy .arm-left {
  left: 10px;
  transform: rotate(30deg);
}

.boy .arm-right {
  right: 10px;
  transform: rotate(-20deg);
}
/* ===== BRAZOS ARRIBA (cuando caminan) ===== */

.excited .arm-left {
  transform: rotate(-120deg);
}

.excited .arm-right {
  transform: rotate(120deg);
}
/* ===== TOM√ÅNDOSE DE LA MANO ===== */

.girl.holding .arm-right {
  transform: rotate(-60deg);
}

.boy.holding .arm-left {
  transform: rotate(60deg);
}


/* Posici√≥n inicial relajada */
.girl .arm-left {
  left: 10px;
  transform: rotate(20deg);
}

.girl .arm-right {
  right: 10px;
  transform: rotate(-30deg);
}

.boy .arm-left {
  left: 10px;
  transform: rotate(30deg);
}

.boy .arm-right {
  right: 10px;
  transform: rotate(-20deg);
}

/* Cuando se toman de las manos */
.holding .arm-left {
  transform: rotate(-50deg);
}

.holding .arm-right {
  transform: rotate(50deg);
}



/* ===== LENTES CUADRADOS ===== */

.glasses {
  position: absolute;
  top: 24px; /* m√°s arriba */
  left: 50%;
  transform: translateX(-50%);
  width: 50px;
  height: 20px;
}

/* Lente izquierdo */
.glasses::before {
  content: "";
  position: absolute;
  width: 16px;
  height: 16px;
  border: 2px solid black;
  left: 0;
}

.glasses::after {
  content: "";
  position: absolute;
  width: 16px;
  height: 16px;
  border: 2px solid black;
  right: 0;
}


/* Barra superior */
.glasses-bridge {
  position: absolute;
  top: 20px;
  left: 50%;
  width: 14px;
  height: 2px;
  background: black;
  transform: translateX(-50%);
}

/* ===== TRENZAS ===== */

.braid {
  position: absolute;
  top: -1px;
  width: 14px;
  height: 120px;
  background: #000;
  border-radius: 10px;
}

/* izquierda */
.braid-left {
  left: 1px;
}

/* derecha */
.braid-right {
  right: 1px;
}
/* ===== RUBOR MUJER ===== */

.blush {
  position: absolute;
  width: 14px;
  height: 10px;
  background: rgba(255, 120, 150, 0.4);
  border-radius: 50%;
  top: 45px;
  transition: all 0.5s ease;
}
.girl.blushing .blush {
  width: 22px;
  height: 14px;
  background: radial-gradient(
    circle,
    rgba(255, 100, 140, 0.8) 0%,
    rgba(255, 100, 140, 0) 70%
  );

  /* ===== RUBOR MUJER ===== */

}
.character.blushing .blush {
  width: 22px;
  height: 14px;
  background: radial-gradient(
    circle,
    rgba(255, 100, 140, 0.8) 0%,
    rgba(255, 100, 140, 0) 70%
  );
}


.blush-left {
  left: 11px;
}

.blush-right {
  right: 11px;
}
@keyframes floatKiss {
  0% {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  100% {
    opacity: 0;
    transform: translateY(-140px) scale(1.6);
  }
}

#kissContainer {
  position: absolute;
  top: 45%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 3;
  pointer-events: none;
}
#fireworksCanvas {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;          /* üëà FALTABA ESTO */
  height: 100%;         /* üëà Y ESTO */
  z-index: 999;         /* lo subimos por seguridad */
  pointer-events: none;
}

#finalScene {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: black;
  opacity: 0;
  transition: opacity 1.5s ease;
  z-index: 998;
}



function animateFireworks() {
  fwCtx.clearRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);


  fireworks.forEach((p, index) => {
    p.x += Math.cos(p.angle) * p.speed;
    p.y += Math.sin(p.angle) * p.speed;
    p.alpha -= 0.02;

    fwCtx.beginPath();
    fwCtx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
    fwCtx.fillStyle = `rgba(255,${Math.random()*255},0,${p.alpha})`;
    fwCtx.fill();

    if (p.alpha <= 0) {
      fireworks.splice(index, 1);
    }
  });

  if (fireworks.length > 0) {
    requestAnimationFrame(animateFireworks);
  }
}

@keyframes floatEmoji {
  0% {
    transform: scale(0.5) translateY(0);
    opacity: 1;
  }
  100% {
    transform: scale(1.5) translateY(-100px);
    opacity: 0;
  }
  /* botones  */
}
.hidden {
  display: none;
}

#scene3 {
  background: #f6b6d8; /* rosado pastel */
  display: flex;
  justify-content: center;
  align-items: center;
}
.valentine-box {
  background: #eaeaea;
  padding: 60px 80px;
  border-radius: 25px;
  border: 8px solid #ff5c8a;
  box-shadow:
    0 0 0 6px white inset,
    0 20px 40px rgba(0,0,0,0.2);
  text-align: center;
  position: relative;
  z-index: 10; /* üëà IMPORTANTE */
}
.valentine-box button {
  font-family: 'Press Start 2P', cursive;
  font-size: 14px;
  padding: 15px 30px;
  border: 4px solid black;
  cursor: pointer;
  margin: 10px;
  box-shadow: 6px 6px 0 black;
  transition: transform 0.1s;
}

#yesBtn {
  background: #4CAF50;
  color: white;
}

#noBtn {
  background: #f44336;
  color: white;
}

.valentine-box button:active {
  transform: translate(4px,4px);
  box-shadow: 2px 2px 0 black;
}
#scene4 {
  background: #fdf6e3;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
}

.love-letter {
  background: #fffaf0;
  padding: 60px;
  width: 600px;
  border-radius: 10px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.3);
  font-family: 'Georgia', serif;
  font-size: 18px;
  line-height: 1.8;
  color: #5a2a2a;
  position: relative;
}

.love-letter::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 10px;
  background: repeating-linear-gradient(
    45deg,
    #ff8aa0,
    #ff8aa0 10px,
    white 10px,
    white 20px
  );
}

@keyframes volcanoPop {
    0% {
        transform: translateY(0) scale(1);
        opacity: 1;
    }
    50% {
        transform: translateY(-60px) scale(1.3);
        opacity: 1;
    }
    100% {
        transform: translateY(-120px) scale(0.5);
        opacity: 0;
    }
}
#scene3 h1 {
  background: linear-gradient(45deg, #ff2e63, #ff8ba7);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}
/* ===== CORAZONES ===== */
const canvas = document.getElementById("heartCanvas");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const hearts = Array.from({ length: 50 }, () => ({
  x: Math.random() * canvas.width,
  y: Math.random() * canvas.height,
  size: Math.random() * 20 + 22,
  speed: Math.random() * 1 + 0.6,
  color: `rgba(200,30,30,0.7)`
}));

function drawHearts() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  hearts.forEach(h => {
    ctx.fillStyle = h.color;
    ctx.font = `${h.size}px Arial`;
    ctx.fillText("‚ù§", h.x, h.y);
    h.y += h.speed;
    if (h.y > canvas.height) h.y = -10;
  });
  requestAnimationFrame(drawHearts);
}
drawHearts();

/* ===== CIELO ===== */
const skyCanvas = document.getElementById("skyCanvas");
const skyCtx = skyCanvas.getContext("2d");
let clouds = [
  { x: 400, y: 110, size: 1.2, speed: 0.18, type: 1 },
  { x: 650, y: 170, size: 0.9, speed: 0.12, type: 2 }
];


let sunRotation = 0;
let butterfly = {
  x: 100,
  y: 300,
  speed: 0.4,
  wing: 0
};



function resizeSky() {
  skyCanvas.width = window.innerWidth;
  skyCanvas.height = window.innerHeight;
}
resizeSky();

function drawSkyScene() {

  // ===== CIELO CON DEGRADADO =====
  const gradient = skyCtx.createLinearGradient(0, 0, 0, skyCanvas.height);
  gradient.addColorStop(0, "#6EC6FF");
  gradient.addColorStop(1, "#BFE9FF");

  skyCtx.fillStyle = gradient;
  skyCtx.fillRect(0, 0, skyCanvas.width, skyCanvas.height);

  // ===== SOL CON RAYOS =====
  drawSun();

  // ===== NUBES =====
  clouds.forEach(cloud => {
    drawCloud(cloud);
    cloud.x += cloud.speed;

    // Reaparecer al salir
    if (cloud.x > skyCanvas.width + 100) {
      cloud.x = -150;
    }
  });

// ===== C√âSPED ONDULADO =====
skyCtx.beginPath();
skyCtx.moveTo(0, skyCanvas.height - 120);

for (let x = 0; x <= skyCanvas.width; x += 20) {
  let y = skyCanvas.height - 120 +
          Math.sin(x * 0.02 + Date.now() * 0.002) * 6;
  skyCtx.lineTo(x, y);
}

skyCtx.lineTo(skyCanvas.width, skyCanvas.height);
skyCtx.lineTo(0, skyCanvas.height);
skyCtx.closePath();

skyCtx.fillStyle = "#4CAF50";
skyCtx.fill();

// üå∏ FLORES (JUSTO AQU√ç)
drawFlower(200, skyCanvas.height - 90);
drawFlower(350, skyCanvas.height - 80);
drawFlower(500, skyCanvas.height - 95);
function drawFlower(x, y) {

  // Tallo
  skyCtx.strokeStyle = "#2E7D32";
  skyCtx.lineWidth = 3;
  skyCtx.beginPath();
  skyCtx.moveTo(x, y);
  skyCtx.lineTo(x, y + 30);
  skyCtx.stroke();

  // Centro
  skyCtx.beginPath();
  skyCtx.arc(x, y, 6, 0, Math.PI * 2);
  skyCtx.fillStyle = "#FFD54F";
  skyCtx.fill();

  // P√©talos
  skyCtx.fillStyle = "#FF69B4";

  for (let i = 0; i < 5; i++) {
    let angle = (Math.PI * 2 / 5) * i;
    let px = x + Math.cos(angle) * 12;
    let py = y + Math.sin(angle) * 12;

    skyCtx.beginPath();
    skyCtx.arc(px, py, 6, 0, Math.PI * 2);
    skyCtx.fill();
  }
}



// ü¶ã MARIPOSA
drawButterfly();
function drawButterfly() {

  skyCtx.save();
  skyCtx.translate(butterfly.x, butterfly.y);

  butterfly.wing += 0.1;
  let flap = Math.sin(butterfly.wing) * 10;

  // Ala izquierda
  skyCtx.beginPath();
  skyCtx.ellipse(-10, 0, 15, 20, flap * 0.02, 0, Math.PI * 2);
  skyCtx.fillStyle = "#BA68C8";
  skyCtx.fill();

  // Ala derecha
  skyCtx.beginPath();
  skyCtx.ellipse(10, 0, 15, 20, -flap * 0.02, 0, Math.PI * 2);
  skyCtx.fill();

  // Cuerpo
  skyCtx.fillStyle = "#5D4037";
  skyCtx.fillRect(-2, -10, 4, 20);

  skyCtx.restore();

  butterfly.x += butterfly.speed;

  if (butterfly.x > skyCanvas.width + 20) {
    butterfly.x = -20;
  }
}



// üîÅ LOOP
requestAnimationFrame(drawSkyScene);
}

function drawCloud(cloud) {

  skyCtx.save();
  skyCtx.translate(cloud.x, cloud.y);
  skyCtx.scale(cloud.size, cloud.size);

  skyCtx.fillStyle = "white";
  skyCtx.shadowColor = "rgba(0,0,0,0.1)";
  skyCtx.shadowBlur = 10;
  skyCtx.shadowOffsetY = 4;
  skyCtx.beginPath();

  if (cloud.type === 1) {
    // Nube m√°s redonda y suave
    skyCtx.arc(0, 20, 25, 0, Math.PI * 2);
    skyCtx.arc(30, 10, 35, 0, Math.PI * 2);
    skyCtx.arc(70, 20, 25, 0, Math.PI * 2);
  } else {
    // Nube m√°s alargada tipo viento
    skyCtx.arc(0, 25, 20, 0, Math.PI * 2);
    skyCtx.arc(25, 10, 30, 0, Math.PI * 2);
    skyCtx.arc(60, 15, 25, 0, Math.PI * 2);
    skyCtx.arc(90, 25, 20, 0, Math.PI * 2);
  }

  skyCtx.fill();
  skyCtx.restore();
}



window.addEventListener("resize", () => {
  resizeSky();
  drawSkyScene();
});

/* ===== CONTROL ===== */
const startScreen = document.getElementById("startScreen");
const scene = document.getElementById("scene");
const girl = document.querySelector(".girl");
const boy = document.querySelector(".boy");

// ===== TIEMPOS =====
const WALK_DURATION = 4000;
const FADE_DURATION = 1500;
const LEAN_DELAY = 500;


let started = false;

window.addEventListener("keydown", () => {
  if (started) return;
  started = true;

  startScreen.classList.add("fade-out");

  setTimeout(() => {
    startScreen.style.display = "none";
   scene.classList.add("active");
    drawSkyScene();

    // CAMINAN
    girl.classList.add("walk-girl");
    boy.classList.add("walk-boy");

    // Cuando terminan de caminar
    setTimeout(() => {

      // Se inclinan ligeramente
      girl.classList.add("lean");
      boy.classList.add("lean");

      // Se sonrojan
      girl.classList.add("blushing");
      boy.classList.add("blushing");

      // Levantan brazos
      girl.classList.add("holding");
      boy.classList.add("holding");

      // Esperamos un poquito antes de la nube
      setTimeout(() => {

        startKissExplosion();

        // üéÜ Despu√©s del beso ‚Üí fuegos
        setTimeout(() => {
          startFireworksTransition();
        }, 2500);

      }, 600);



    }, WALK_DURATION);

 }, FADE_DURATION);

});

function startKissExplosion() {
  const container = document.getElementById("kissContainer");

  container.style.position = "absolute";
  container.style.top = "35%";
  container.style.left = "50%";
  container.style.transform = "translateX(-50%)";
  container.style.zIndex = "3";
  container.style.pointerEvents = "none";

  for (let i = 0; i < 50; i++) {
    setTimeout(() => {
      const kiss = document.createElement("div");
      kiss.innerText = "üíã";
      kiss.style.position = "absolute";
      kiss.style.fontSize = "22px";
      kiss.style.left = (Math.random() * 400 - 200) + "px";
      kiss.style.animation = "floatKiss 2.5s ease-out forwards";

      container.appendChild(kiss);

      setTimeout(() => kiss.remove(), 2500);

    }, i * 80);
  }
}

function drawSun() {

  const sunX = skyCanvas.width - 120;
  const sunY = 100;

  skyCtx.save();
  skyCtx.translate(sunX, sunY);
  skyCtx.rotate(sunRotation);

  // Rayos
  for (let i = 0; i < 12; i++) {
    skyCtx.rotate(Math.PI / 6);
    skyCtx.beginPath();
    skyCtx.moveTo(60, 0);
    skyCtx.lineTo(80, 0);
    skyCtx.strokeStyle = "#FFD700";
    skyCtx.lineWidth = 4;
    skyCtx.stroke();
  }

  skyCtx.restore();

  // C√≠rculo central
  skyCtx.beginPath();
  skyCtx.arc(sunX, sunY, 50, 0, Math.PI * 2);
  skyCtx.fillStyle = "#FFD700";
  skyCtx.fill();

  sunRotation += 0.002; // velocidad suave
}
/* ===== TRANSICI√ìN FUEGOS ARTIFICIALES ===== */

const fireworksCanvas = document.getElementById("fireworksCanvas");
const fwCtx = fireworksCanvas.getContext("2d");

fireworksCanvas.width = window.innerWidth;
fireworksCanvas.height = window.innerHeight;

let fireworks = [];

function startFireworksTransition() {

  setTimeout(() => {

    const scene2 = document.getElementById("scene");
    const scene3 = document.getElementById("scene3");

    // Ocultamos escena 2
    scene2.classList.remove("active");
    scene2.classList.add("hidden");

    // Mostramos escena 3
    scene3.classList.remove("hidden");
    scene3.classList.add("active");

    // üî• AQU√ç arrancan los volcanes
    volcanoInterval = setInterval(createVolcanoExplosion, 600);

  }, 3000);

}


function createExplosion(x, y) {
  for (let i = 0; i < 40; i++) {
    fireworks.push({
      x: x,
      y: y,
      angle: Math.random() * Math.PI * 2,
      speed: Math.random() * 4 + 2,
      radius: 3,
      alpha: 1
    });
  }
}

function animateFireworks() {
  fwCtx.fillStyle = "rgba(0,0,0,0.2)";
  fwCtx.fillRect(0, 0, fireworksCanvas.width, fireworksCanvas.height);

  fireworks.forEach((p, index) => {
    p.x += Math.cos(p.angle) * p.speed;
    p.y += Math.sin(p.angle) * p.speed;
    p.alpha -= 0.02;

    fwCtx.beginPath();
    fwCtx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);
    fwCtx.fillStyle = `rgba(255,${Math.random()*255},0,${p.alpha})`;
    fwCtx.fill();

    if (p.alpha <= 0) {
      fireworks.splice(index, 1);
    }
  });

  if (fireworks.length > 0) {
    requestAnimationFrame(animateFireworks);
  }
}
/* ===== ESCENA 3 BOTONES ===== */

const noBtn = document.getElementById("noBtn");
const yesBtn = document.getElementById("yesBtn");

// FUNCI√ìN EMOJIS
function spawnEmoji(emoji) {
  const e = document.createElement("div");
  e.innerText = emoji;
  e.style.position = "fixed";
  e.style.left = Math.random() * window.innerWidth + "px";
  e.style.top = Math.random() * window.innerHeight + "px";
  e.style.fontSize = "30px";
  e.style.zIndex = "30";
  e.style.pointerEvents = "none";
  e.style.animation = "floatEmoji 1.5s ease-out forwards";

  document.body.appendChild(e);

  setTimeout(() => e.remove(), 1500);
}

// EXPLOSI√ìN DE CORAZONES
function heartExplosion() {
  for (let i = 0; i < 15; i++) {

    const heart = document.createElement("div");
    heart.innerText = "üíò";
    heart.style.position = "fixed";
    heart.style.left = window.innerWidth / 2 + "px";
    heart.style.top = window.innerHeight / 2 + "px";
    heart.style.fontSize = "25px";
    heart.style.pointerEvents = "none";
    heart.style.zIndex = "25";

    const angle = Math.random() * 2 * Math.PI;
    const distance = Math.random() * 200;

    const x = Math.cos(angle) * distance;
    const y = Math.sin(angle) * distance;

    heart.animate([
      { transform: "translate(0,0)", opacity: 1 },
      { transform: `translate(${x}px, ${y}px)`, opacity: 0 }
    ], {
      duration: 1000,
      easing: "ease-out"
    });

    document.body.appendChild(heart);

    setTimeout(() => heart.remove(), 1000);
  }
}

// BOT√ìN NO HUYE
noBtn.addEventListener("mouseenter", () => {

  const x = Math.random() * (window.innerWidth - 100);
  const y = Math.random() * (window.innerHeight - 50);

  noBtn.style.position = "fixed";
  noBtn.style.left = x + "px";
  noBtn.style.top = y + "px";

  spawnEmoji("üòÇ");
  spawnEmoji("‚ö†Ô∏è");
  heartExplosion();
});

// BOT√ìN S√ç ‚Üí ESCENA 4
yesBtn.addEventListener("click", () => {

clearInterval(volcanoInterval);

  const scene3 = document.getElementById("scene3");
  const scene4 = document.getElementById("scene4");

  // 1Ô∏è‚É£ Quitamos active para que empiece el fade out
  scene3.classList.remove("active");

  // 2Ô∏è‚É£ Esperamos que termine la animaci√≥n
  setTimeout(() => {

    // 3Ô∏è‚É£ Ocultamos completamente la escena 3
    scene3.classList.add("hidden");

    // 4Ô∏è‚É£ Mostramos la escena 4
    scene4.classList.remove("hidden");

    // 5Ô∏è‚É£ Activamos fade in
    scene4.classList.add("active");

  }, 600); //

});
let heartInterval;

function spawnHeartExplosion() {
  for (let i = 0; i < 6; i++) {

    const heart = document.createElement("div");
    heart.innerText = "üíò";
    heart.style.position = "fixed";
    heart.style.left = Math.random() * window.innerWidth + "px";
    heart.style.top = Math.random() * window.innerHeight + "px";
    heart.style.fontSize = "24px";
    heart.style.pointerEvents = "none";
    heart.style.zIndex = "1";
    heart.style.animation = "floatEmoji 2s ease-out forwards";

    document.body.appendChild(heart);

    setTimeout(() => heart.remove(), 2000);
  }
}


let volcanoInterval;
function createVolcanoExplosion() {

  const box = document.querySelector(".valentine-box");
  const boxRect = box.getBoundingClientRect();

  let x, y;
  let insideBox = true;

  while (insideBox) {

    x = Math.random() * window.innerWidth;
    y = Math.random() * window.innerHeight;

    insideBox =
      x > boxRect.left &&
      x < boxRect.right &&
      y > boxRect.top &&
      y < boxRect.bottom;
  }

  for (let i = 0; i < 8; i++) {

    const heart = document.createElement("div");
    heart.innerHTML = "üíò";

    heart.style.position = "absolute";
    heart.style.left = x + "px";
    heart.style.top = y + "px";
    heart.style.fontSize = "24px";
    heart.style.pointerEvents = "none";
    heart.style.animation = "volcanoPop 1s ease-out forwards";

    document.getElementById("scene3").appendChild(heart);

    setTimeout(() => {
      heart.remove();
    }, 1000);
  }
}
#scene4 {
    background: linear-gradient(135deg, #f3e8ff, #e9d5ff);
    overflow: hidden;
}

@keyframes fallRose {
    0% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
    }
    100% {
        transform: translateY(110vh) rotate(360deg);
        opacity: 0.8;
    }
}

/* ===== FONDO MORADO PASTEL ===== */
#scene4 {
    background: linear-gradient(135deg, #f3e8ff, #e9d5ff);
    overflow: hidden;
    position: relative;
}

/* ===== T√çTULO ===== */
.final-title {
    text-align: center;
    font-size: 40px;
    color: #6b21a8;
    margin-top: 60px;
}

/* ===== ENVOLTURA ===== */
.envelope-wrapper {
    display: flex;
    justify-content: center;
    margin-top: -200px;
    position: relative;
    top: 10px;
     left: -40px;
}

/* ===== SOBRE ===== */
.envelope {
    position: relative;
    width: 420px;
    height: 260px;
    perspective: 1000px;
}

/* Parte trasera del sobre */
.envelope-back {
    position: absolute;
    width: 100%;
    height: 100%;
    background: #c084fc;
    border-radius: 8px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.25);
}

/* Tapa triangular real */
.flap {
    position: absolute;
    top: 0;
    width: 100%;
    height: 0;
    border-left: 210px solid transparent;
    border-right: 210px solid transparent;
    border-top: 130px solid #a855f7;
    transform-origin: top;
    transition: transform 1.2s ease;
    z-index: 3;
}

/* Carta */
.letter {
    position: absolute;
    width: 90%;
    min-height: 130%;
    background: white;
    top: 5%;
    left: 5%;
    border-radius: 6px;
    padding: 30px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.25);
    transform: translateY(50%);
    transition: transform 1.5s ease;
    text-align: justify;
    letter-spacing: -2px;

    z-index: 1;
}


/* Cuando el sobre se abre */
.envelope.open .flap {
    transform: rotateX(180deg);
}

.envelope.open .letter {
    transform: translateY(-1%);
}

/* Animaci√≥n abrir sobre */
@keyframes openFlap {
    0% { transform: rotateX(0deg); }
    100% { transform: rotateX(-180deg); }
}

/* Animaci√≥n sacar carta */
@keyframes slideLetter {
    0% { transform: translateY(100%); }
    100% { transform: translateY(0); }
}
#scene4 h1 {
    color: #ff4da6; /* usa el mismo color que escena 1 */
    font-size: 60px;
    text-align: center;
    animation: floatTitle 3s ease-in-out infinite;
}
@keyframes floatTitle {
    0% { transform: translateY(0px); }
    50% { transform: translateY(-15px); }
    100% { transform: translateY(0px); }
}
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    background: #f3e8ff; /* mismo tono del fondo */
}
